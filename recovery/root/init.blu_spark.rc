# blu_spark extras

on property:crypto.ready=1
    # Tweak IO performance after boot complete
    write /sys/block/sda/queue/scheduler "zen"
    write /sys/block/sda/queue/read_ahead_kb 512
    write /sys/block/dm-0/queue/read_ahead_kb 512

    # Input boost and stune configuration
    write /sys/module/cpu_boost/parameters/input_boost_freq "0:0 1:0 2:0 3:0 4:0 5:0 6:0 7:0"
    write /sys/module/cpu_boost/parameters/input_boost_ms 0

    # Disable scheduler core_ctl
    write /sys/devices/system/cpu/cpu0/core_ctl/enable 0
    write /sys/devices/system/cpu/cpu4/core_ctl/enable 0
    write /sys/devices/system/cpu/cpu7/core_ctl/enable 0

    # Enable adrenoboost and set initial gpu max freq/level
    write /sys/class/devfreq/2c00000.qcom,kgsl-3d0/adrenoboost 0
    write /sys/class/kgsl/kgsl-3d0/devfreq/max_freq 585000000
    write /sys/class/kgsl/kgsl-3d0/default_pwrlevel 5

    # Set min cpu freq
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq 576000
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq 710400
    write /sys/devices/system/cpu/cpu7/cpufreq/scaling_min_freq 825600

    # Configure governor settings for little cluster
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "blu_schedutil"
    write /sys/devices/system/cpu/cpu0/cpufreq/blu_schedutil/up_rate_limit_us 0
    write /sys/devices/system/cpu/cpu0/cpufreq/blu_schedutil/down_rate_limit_us 20000
    write /sys/devices/system/cpu/cpu0/cpufreq/blu_schedutil/iowait_boost_enable 1

    # Configure governor settings for big cluster
    write /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor "blu_schedutil"
    write /sys/devices/system/cpu/cpu4/cpufreq/blu_schedutil/up_rate_limit_us 0
    write /sys/devices/system/cpu/cpu4/cpufreq/blu_schedutil/down_rate_limit_us 20000
    write /sys/devices/system/cpu/cpu4/cpufreq/blu_schedutil/iowait_boost_enable 1

    # Configure governor settings for prime cluster
    write /sys/devices/system/cpu/cpu7/cpufreq/scaling_governor "blu_schedutil"
    write /sys/devices/system/cpu/cpu7/cpufreq/blu_schedutil/up_rate_limit_us 0
    write /sys/devices/system/cpu/cpu7/cpufreq/blu_schedutil/down_rate_limit_us 20000
    write /sys/devices/system/cpu/cpu7/cpufreq/blu_schedutil/iowait_boost_enable 1

    # OTG on by default
    write /sys/class/power_supply/usb/otg_switch 1

    write /dev/kmsg "Boot blu_spark completed "
